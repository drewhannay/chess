apply plugin: 'java'

sourceCompatibility = 1.6
version = '1.0'

sourceSets {
	main {
		java {
			srcDirs = ['src']
		}
		resources {
			srcDirs = ['images', 'resources']
		}
	}

	test {
		java {
			srcDirs = ['test']
		}
	}
}

repositories {
	mavenCentral()
}

dependencies {
	compile group: 'com.google.guava', name: 'guava', version: '15.0'
	testCompile 'junit:junit:[4,)'
}

test {
    testLogging {
        events 'started', 'passed'
    }
	include '**/*Suite.class'
}

jar {
    from configurations.compile.collect { it.isDirectory() ? it : zipTree(it) }
}

import java.awt.Desktop

gradle.taskGraph.afterTask { task, taskState ->
    if (task instanceof Test) {
        if (Desktop.isDesktopSupported()) {
			File file = new File(task.getReports().getHtml().getDestination(), 'index.html')
			if (file.exists()) {
            	Desktop.getDesktop().browse( file.toURI() )
			}
        }
    }
}
